---
layout: post
title:  "G6 源码阅读"
---

[G6](https://antv.alipay.com/zh-cn/g6/3.x/index.html) 官网的介绍如下:

```
G6 是一个简单、易用、完备的图可视化引擎，它在高定制能力的基础上，提供了一系列设计优雅、便于使用的图可视化解决方案。能帮助开发者搭建属于自己的图 图分析 应用或是 图编辑器 应用。
```

这是一个很难抽象的库，既要有足够的拓展性以满足各种定制化的业务需求，又要让开发者用起来简单。

G6 依赖底层图表库 [G](https://github.com/antvis/g), [这里我写了一个 demo](https://codepen.io/dd1994/pen/ZEzQLWE), 用 G 的 API 做一个最简单的关系图, 有点繁琐，跟直接调用浏览器的 canvas API 画图差不多。G6 的工作就是在 G 之上再封装一层，让可视化更加容易。

G6 的代码用的是 `@babel/preset-env` 的语法, 没用 TypeScript, 所以看的有点难受，比如都用 Class 了但是没法用私有方法和私有属性，只能在名字前加个下划线 `_` 区分。

导出的全部 API 如下:
  * Graph: 初始化图表,
  * TreeGraph: 初始化树图,
  * Util: 工具类,
  * G: 依赖的底层绘图库,
  * Global: 一些全局常量,
  * Shape: ,
  * registerNode: 自定义节点,
  * registerEdge: 自定义边,
  * registerBehavior: 自定义行为,
  * version: 版本号

源码 src 文件夹下文件如下:

```
.
├── behavior
├── util
├── graph
├── shape
├── item
├── index.js
└── global.js
```

相关内容分别为:
* behavior: 模式相关文件
* util: 一些工具函数
* graph: `Graph` 类，主流程入口
* shape: Shape API都是在自定义节点或自定义边的过程中需要部分复写的方法
* item: item是G6中绘图元素实例，目前包含节点和边的实例。
其中 `index.js` 为导出文件
